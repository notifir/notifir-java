/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5/samples
 */

plugins {
  id 'java'
  id 'maven-publish'
  id 'fr.brouillard.oss.gradle.jgitver' version '0.9.1'
}

repositories {
  mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

ext {
  okhttpVersion = '4.10.0'
  jacksonVersion = '2.13.3'
  hamcrestVersion = '2.2'
}

dependencies {
  implementation "com.squareup.okhttp3:okhttp:${okhttpVersion}"
  implementation "com.squareup.okhttp3:logging-interceptor:${okhttpVersion}"
  implementation "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
  implementation "org.apache.commons:commons-lang3:3.12.0"

  compileOnly 'org.projectlombok:lombok:1.18.24'
  annotationProcessor 'org.projectlombok:lombok:1.18.24'

  testCompileOnly 'org.projectlombok:lombok:1.18.24'
  testAnnotationProcessor 'org.projectlombok:lombok:1.18.24'

  testImplementation "org.mockito:mockito-core:4.6.1"
  testImplementation "com.squareup.okhttp3:mockwebserver:${okhttpVersion}"
  testImplementation "org.hamcrest:hamcrest-core:${hamcrestVersion}"
  testImplementation "org.hamcrest:hamcrest-library:${hamcrestVersion}"
  testImplementation "junit:junit:4.13.2"
}

publishing {
  repositories {
    maven {
      name = "GitHubPackages"
      url = uri("https://maven.pkg.github.com/notifir/notifir-java")
      credentials {
        username = project.findProperty("gpr.user") ?: System.getenv("GITHUB_ACTOR")
        password = project.findProperty("gpr.key") ?: System.getenv("GITHUB_TOKEN")
      }
    }
  }
  publications {
    maven(MavenPublication) {
      groupId = 'io.github.notifir'
      artifactId = 'notifir'

      from components.java
    }
  }
}

jgitver {
  strategy 'MAVEN'
  nonQualifierBranches 'main'
  useDirty true
}
